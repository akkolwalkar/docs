<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Migrating Your QuestNet Entity for the Amber Network | Oasis Dev Docs</title>
    <meta name="generator" content="VuePress 1.5.1">
    <link rel="icon" href="/favicon.ico">
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-116576458-1"></script>
    <script>window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       gtag('js', new Date());
       gtag('config', 'UA-116576458-1');</script>
    <meta name="description" content="Oasis Developer Documentation">
    <link rel="preload" href="/assets/css/0.styles.1cee4db1.css" as="style"><link rel="preload" href="/assets/js/app.6f5bfdbe.js" as="script"><link rel="preload" href="/assets/js/2.a932729e.js" as="script"><link rel="preload" href="/assets/js/30.91f518f3.js" as="script"><link rel="prefetch" href="/assets/js/10.ec1c5971.js"><link rel="prefetch" href="/assets/js/11.d98d4679.js"><link rel="prefetch" href="/assets/js/12.145c586b.js"><link rel="prefetch" href="/assets/js/13.f651100d.js"><link rel="prefetch" href="/assets/js/14.2c0ed495.js"><link rel="prefetch" href="/assets/js/15.b9157f5c.js"><link rel="prefetch" href="/assets/js/16.bbf097c1.js"><link rel="prefetch" href="/assets/js/17.7d66fcd3.js"><link rel="prefetch" href="/assets/js/18.05f754d7.js"><link rel="prefetch" href="/assets/js/19.f54ef7db.js"><link rel="prefetch" href="/assets/js/20.d34e1d68.js"><link rel="prefetch" href="/assets/js/21.71d9b216.js"><link rel="prefetch" href="/assets/js/22.5e8ebc79.js"><link rel="prefetch" href="/assets/js/23.da5a7ae6.js"><link rel="prefetch" href="/assets/js/24.4ad6ca31.js"><link rel="prefetch" href="/assets/js/25.0997ab2b.js"><link rel="prefetch" href="/assets/js/26.08b4cd4c.js"><link rel="prefetch" href="/assets/js/27.5ce65676.js"><link rel="prefetch" href="/assets/js/28.f526b187.js"><link rel="prefetch" href="/assets/js/29.0b820168.js"><link rel="prefetch" href="/assets/js/3.bb34ca9d.js"><link rel="prefetch" href="/assets/js/31.b3d926e5.js"><link rel="prefetch" href="/assets/js/32.15e630f0.js"><link rel="prefetch" href="/assets/js/33.89d2658f.js"><link rel="prefetch" href="/assets/js/34.9ca9d83a.js"><link rel="prefetch" href="/assets/js/35.bf447430.js"><link rel="prefetch" href="/assets/js/36.df3f12c3.js"><link rel="prefetch" href="/assets/js/37.5af713d4.js"><link rel="prefetch" href="/assets/js/38.8996aad5.js"><link rel="prefetch" href="/assets/js/39.749b609b.js"><link rel="prefetch" href="/assets/js/4.352c31e9.js"><link rel="prefetch" href="/assets/js/40.f740c365.js"><link rel="prefetch" href="/assets/js/41.8009e72f.js"><link rel="prefetch" href="/assets/js/42.d73aa5fd.js"><link rel="prefetch" href="/assets/js/43.685677af.js"><link rel="prefetch" href="/assets/js/44.e52cfb74.js"><link rel="prefetch" href="/assets/js/5.591bd4a5.js"><link rel="prefetch" href="/assets/js/6.67de7681.js"><link rel="prefetch" href="/assets/js/7.b9fd8260.js"><link rel="prefetch" href="/assets/js/8.6f541b07.js"><link rel="prefetch" href="/assets/js/9.760f848b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1cee4db1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="Oasis Dev Docs" class="logo"> <span class="site-name can-hide">Oasis Dev Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://oasislabs.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://join.slack.com/t/oasiscommunity/shared_invite/enQtNjQ5MTA3NTgyOTkzLWIxNTg1ZWZmOTIwNmQ2MTg1YmU0MzgyMzk3OWM2ZWQ4NTQ0ZDJkNTBmMTdlM2JhODllYjg5YmJkODc2NzgwNTg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/oasislabs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://oasislabs.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://join.slack.com/t/oasiscommunity/shared_invite/enQtNjQ5MTA3NTgyOTkzLWIxNTg1ZWZmOTIwNmQ2MTg1YmU0MzgyMzk3OWM2ZWQ4NTQ0ZDJkNTBmMTdlM2JhODllYjg5YmJkODc2NzgwNTg" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Support
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/oasislabs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/overview.html" class="sidebar-link">Overview</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>App Developer Docs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Operator Docs</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/operators/overview.html" class="sidebar-link">Node Operator Overview</a></li><li><a href="/operators/architecture-overview.html" class="sidebar-link">Network Architecture Overview</a></li><li><a href="/operators/prerequisites.html" class="sidebar-link">Prerequisites Guide</a></li><li><a href="/operators/amber-network.html" class="sidebar-link">Amber Network</a></li><li><a href="/operators/hardware-recommendations.html" class="sidebar-link">Node Hardware Recommendations</a></li><li><a href="/operators/running-node-on-amber-network.html" class="sidebar-link">Running a Node on the Amber Network</a></li><li><a href="/operators/creating-an-entity-package.html" class="sidebar-link">Creating an Entity Package</a></li><li><a href="/operators/migrating-questnet-entities.html" aria-current="page" class="active sidebar-link">Migrating Your QuestNet Entity for the Amber Network</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/operators/migrating-questnet-entities.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/operators/migrating-questnet-entities.html#step-1-backup-all-of-your-entity-node-artifacts" class="sidebar-link">Step 1: Backup all of your entity/node artifacts</a></li><li class="sidebar-sub-header"><a href="/operators/migrating-questnet-entities.html#step-2-update-your-entity-to-the-latest-version" class="sidebar-link">Step 2: Update your entity to the latest version</a></li><li class="sidebar-sub-header"><a href="/operators/migrating-questnet-entities.html#step-3-create-a-new-set-of-node-artifacts" class="sidebar-link">Step 3: Create a new set of node artifacts</a></li><li class="sidebar-sub-header"><a href="/operators/migrating-questnet-entities.html#step-4-update-your-entity-with-the-new-node-descriptor" class="sidebar-link">Step 4: Update your entity with the new node descriptor</a></li><li class="sidebar-sub-header"><a href="/operators/migrating-questnet-entities.html#step-5-create-and-submit-your-entity-package" class="sidebar-link">Step 5: Create and submit your Entity Package</a></li><li class="sidebar-sub-header"><a href="/operators/migrating-questnet-entities.html#step-6-update-your-node" class="sidebar-link">Step 6: Update your node</a></li></ul></li><li><a href="/operators/current-testnet-parameters.html" class="sidebar-link">Current Testnet Parameters</a></li><li><a href="/operators/stake-management.html" class="sidebar-link">Stake Management</a></li><li><a href="/operators/sentry-node.html" class="sidebar-link">Sentry Node Architecture</a></li><li><a href="/operators/incentives-proposal.html" class="sidebar-link">Network Incentives Proposal</a></li><li><a href="/operators/the-quest-rules.html" class="sidebar-link">The Quest Rules</a></li><li><a href="/operators/community-resources.html" class="sidebar-link">Community-Made Resources</a></li><li><a href="/operators/troubleshooting.html" class="sidebar-link">Troubleshooting Guide</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Maintenance Guides</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>API Reference</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HSM Support</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="migrating-your-questnet-entity-for-the-amber-network"><a href="#migrating-your-questnet-entity-for-the-amber-network" class="header-anchor">#</a> Migrating Your QuestNet Entity for the Amber Network</h1> <div class="custom-block warning"><p class="custom-block-title">NOTE</p> <p>The deadline for Amber Network Entity Packages is 2020-06-15T23:59:00 UTC. You
must migrate your entity before then.</p></div> <p>For those who have previously participated in The Quest, you must create an
entity package for the Amber Network derived from your Quest entity. A migration
is required due to breaking changes in the entity and node descriptor formats
used between The Quest and the Amber Network.</p> <p>To summarize, the steps required for migration are as follows:</p> <ol><li>Backup all of your entity/node artifacts.</li> <li>Update your entity descriptor to the latest version.</li> <li>Create a set of new node artifacts.
<ul><li>This will effectively delete your old node. While it might be possible to
use the same node identity with the Amber Network, for simplicity's sake,
we will not include those instructions. If you attempt to do so, it is at
your own discretion.</li></ul></li> <li>Update your entity with the new node descriptor.
<ul><li>This removes the old node descriptor.</li></ul></li> <li>Create and submit your Entity Package.</li> <li>Start your node with the new node artifacts when the Amber Network
starts.</li></ol> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <ul><li>Your <code>/localhostdir</code> <ul><li>We are assuming that you had previously followed our setup guides and
created an entity/node in a directory called <code>/localhostdir</code></li></ul></li> <li>Your <code>/localhostdir/entity</code> containing your <code>entity.pem</code> (Your entity private key)</li> <li><a href="https://github.com/oasisprotocol/oasis-core/releases/download/v20.7/oasis_core_20.7_linux_amd64.tar.gz" target="_blank" rel="noopener noreferrer">oasis-node v20.7<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="step-1-backup-all-of-your-entity-node-artifacts"><a href="#step-1-backup-all-of-your-entity-node-artifacts" class="header-anchor">#</a> Step 1: Backup all of your entity/node artifacts</h2> <p>While this step is not strictly required, the steps in this guide are
potentially destructive. Please backup the entirety of your
<code>/localhostdir/entity</code> and <code>/localhostdir/node</code> directories just in case you
make a mistake.</p> <h2 id="step-2-update-your-entity-to-the-latest-version"><a href="#step-2-update-your-entity-to-the-latest-version" class="header-anchor">#</a> Step 2: Update your entity to the latest version</h2> <p>In order to migrate the entity to the latest version, execute the following
commands:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node registry entity init <span class="token punctuation">\</span>
    --entity.reuse_signer <span class="token punctuation">\</span>
    --signer.backend <span class="token function">file</span> <span class="token punctuation">\</span>
    --signer.dir /localhostdir/entity <span class="token punctuation">\</span>
    --force
</code></pre></div><h2 id="step-3-create-a-new-set-of-node-artifacts"><a href="#step-3-create-a-new-set-of-node-artifacts" class="header-anchor">#</a> Step 3: Create a new set of node artifacts</h2> <p>As explained previously, the node descriptor format has breaking changes
between The Quest and the Amber Network. To simplify migration, it is best to
delete the old node artifacts and create new ones. Execute the following
commands in the <code>/localhostdir</code> directory.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">rm</span> -r node
<span class="token function">mkdir</span> node
<span class="token builtin class-name">cd</span> node
<span class="token assign-left variable">STATIC_IP</span><span class="token operator">=</span><span class="token operator">&lt;</span>STATIC_IP<span class="token operator">&gt;</span> <span class="token comment"># this is the ip to your sentry or validator node</span>
oasis-node registry node init <span class="token punctuation">\</span>
  --signer.backend <span class="token function">file</span> <span class="token punctuation">\</span>
  --signer.dir /localhostdir/entity <span class="token punctuation">\</span>
  --node.consensus_address <span class="token variable">$STATIC_IP</span>:26656 <span class="token punctuation">\</span>
  --node.is_self_signed <span class="token punctuation">\</span>
  --node.role validator
</code></pre></div><p>After you've completed these steps your <code>/localhostdir/node</code> directory should
include the following files. As before, please be mindful of the files you
<em>should not share</em>.</p> <ul><li><code>consensus.pem</code>: The node's consensus private key. <strong>DO NOT SHARE</strong></li> <li><code>consensus_pub.pem</code>: The node's consensus public key.</li> <li><code>identity.pem</code>: The node's identity private key. <strong>DO NOT SHARE</strong></li> <li><code>identity_pub.pem</code>: The node's identity public key.</li> <li><code>node_genesis.json</code>: The node's details if you wish to include this node in
the genesis file of the network.</li> <li><code>p2p.pem</code>: The node's private key for libp2p. <strong>DO NOT SHARE</strong></li> <li><code>p2p_pub.pem</code>: The node's public key for libp2p.</li> <li><code>tls_identity.pem</code>: The node's TLS private key for securing gRPC
connections. <strong>DO NOT SHARE</strong></li> <li><code>tls_identity_cert.pem</code>: The node's TLS certificate for securing gRPC
connections.</li></ul> <h2 id="step-4-update-your-entity-with-the-new-node-descriptor"><a href="#step-4-update-your-entity-with-the-new-node-descriptor" class="header-anchor">#</a> Step 4: Update your entity with the new node descriptor</h2> <p>Now that we have initialized a new node, we need to add it to the entity
descriptor so that it can properly register itself when the node starts up.</p> <p>Execute the following command in the <code>/localhostdir/node</code> directory:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>oasis-node registry entity update <span class="token punctuation">\</span>
  --signer.dir /localhostdir/entity <span class="token punctuation">\</span>
  --entity.node.descriptor node_genesis.json
</code></pre></div><p>You may be wondering if you need to remove the old node from the entity. The
<code>oasis-node registry entity update</code> command includes only explicitly specified
node descriptors into the entity descriptor. As we do not specify the old
<code>node_genesis.json</code> here, the old node is removed from the entity.</p> <h2 id="step-5-create-and-submit-your-entity-package"><a href="#step-5-create-and-submit-your-entity-package" class="header-anchor">#</a> Step 5: Create and submit your Entity Package</h2> <p>Once you've completed the steps above, follow the guide in <a href="/operators/creating-an-entity-package.html">Creating an Entity
Package</a> <em>before the beginning of the Amber Network</em>.</p> <h2 id="step-6-update-your-node"><a href="#step-6-update-your-node" class="header-anchor">#</a> Step 6: Update your node</h2> <p>At the time you wish to upgrade your node to participate in the Amber
Network, you must ensure that the <code>/localhostdir/node</code> artifacts are uploaded to
your <code>/serverdir/node</code> directory.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/oasislabs/docs/edit/master/src/operators/migrating-questnet-entities.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/operators/creating-an-entity-package.html" class="prev">
        Creating an Entity Package
      </a></span> <span class="next"><a href="/operators/current-testnet-parameters.html">
        Current Testnet Parameters
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6f5bfdbe.js" defer></script><script src="/assets/js/2.a932729e.js" defer></script><script src="/assets/js/30.91f518f3.js" defer></script>
  </body>
</html>
